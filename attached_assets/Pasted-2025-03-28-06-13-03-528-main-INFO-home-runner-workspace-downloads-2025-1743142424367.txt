2025-03-28 06:13:03,528 - __main__ - INFO - مسیر دانلود موقت: /home/runner/workspace/downloads
2025-03-28 06:13:03,529 - __main__ - INFO - فایل کوکی موقت یوتیوب ایجاد شد: /tmp/youtube_cookies_2glx15_m.txt
2025-03-28 06:13:03,530 - __main__ - INFO - در حال اجرای تست‌های خودکار...
2025-03-28 06:13:03,535 - root - INFO - فایل به کش اضافه شد (بدون تعیین کیفیت): /tmp/test_video_q9xc2oah.mp4
2025-03-28 06:13:03,535 - root - INFO - فایل از کش برگردانده شد (بدون تعیین کیفیت): /tmp/test_video_q9xc2oah.mp4
2025-03-28 06:13:03,535 - __main__ - INFO - تست کش با موفقیت انجام شد
2025-03-28 06:13:03,535 - __main__ - INFO - همه تست‌ها با موفقیت اجرا شدند!
2025-03-28 06:13:03,545 - __main__ - INFO - فایل قفل قدیمی پیدا شد. ادامه اجرا...
2025-03-28 06:13:03,546 - __main__ - INFO - پاکسازی فایل‌های موقت: 0 فایل حذف شد
2025-03-28 06:13:03,650 - __main__ - INFO - پاکسازی فایل‌های موقت: 0 فایل حذف شد
2025-03-28 06:13:04,094 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/getMe "HTTP/1.1 200 OK"
2025-03-28 06:13:04,095 - telegram.ext.Application - INFO - Application started
2025-03-28 06:13:04,239 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/deleteWebhook "HTTP/1.1 200 OK"
2025-03-28 06:13:04,240 - __main__ - INFO - ربات با موفقیت راه‌اندازی شد!
2025-03-28 06:13:06,554 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/getUpdates "HTTP/1.1 200 OK"
2025-03-28 06:13:06,747 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/answerCallbackQuery "HTTP/1.1 200 OK"
2025-03-28 06:13:06,747 - __main__ - INFO - کاربر 286420965 دکمه dl_yt_2_yt_e3e3eb را انتخاب کرد
2025-03-28 06:13:06,747 - __main__ - INFO - شناسه URL استخراج شده: yt_e3e3eb
2025-03-28 06:13:06,747 - __main__ - INFO - پردازش درخواست دانلود - نوع: yt, گزینه: 2, شناسه URL: yt_e3e3eb
2025-03-28 06:13:06,747 - __main__ - WARNING - URL با شناسه yt_e3e3eb پیدا نشد
2025-03-28 06:13:06,747 - __main__ - INFO - تلاش مجدد با شناسه بدون پیشوند: e3e3eb
2025-03-28 06:13:06,747 - __main__ - INFO - جستجوی جایگزین: بررسی همه URLهای نوع youtube در مخزن پایدار
2025-03-28 06:13:06,915 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/editMessageText "HTTP/1.1 200 OK"
2025-03-28 06:13:09,048 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/getUpdates "HTTP/1.1 200 OK"
2025-03-28 06:13:09,049 - __main__ - INFO - پیام جدید از کاربر 286420965: https://www.youtube.com/shorts...
2025-03-28 06:13:09,226 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/sendMessage "HTTP/1.1 200 OK"
2025-03-28 06:13:09,234 - __main__ - INFO - URL یوتیوب نرمال‌سازی شد: https://www.youtube.com/shorts/imZkuPNfKas -> https://www.youtube.com/shorts/imZkuPNfKas
2025-03-28 06:13:09,235 - __main__ - INFO - URL یوتیوب در context.user_data ذخیره شد: yt_0dbb54
2025-03-28 06:13:09,235 - __main__ - INFO - شروع پردازش URL یوتیوب: https://www.youtube.com/shorts...
2025-03-28 06:13:09,235 - __main__ - INFO - دانلودر یوتیوب راه‌اندازی شد
WARNING: skipping cookie file entry due to invalid length 1: '.youtube.com    TRUE    /       FALSE   2147483647      CONSENT YES+cb.20210629-13-p1.en+FX+119\n'
WARNING: skipping cookie file entry due to invalid length 1: '.youtube.com    TRUE    /       FALSE   2147483647      VISITOR_INFO1_LIVE      HV1eNSA-Vas\n'
WARNING: skipping cookie file entry due to invalid length 1: '.youtube.com    TRUE    /       FALSE   2147483647      YSC     qVtBh7mnhcM\n'
WARNING: skipping cookie file entry due to invalid length 1: '.youtube.com    TRUE    /       FALSE   2147483647      GPS     1\n'
2025-03-28 06:13:14,783 - __main__ - INFO - دریافت گزینه‌های دانلود برای: Aaj To Bach Gaya Beta‼️🤬#goldenstatueboy #golden #goldenstatueboy11 #love#fuuny#shorts#goldenstatue - مدت: 20 ثانیه
2025-03-28 06:13:14,784 - __main__ - INFO - تعداد گزینه‌های دانلود ایجاد شده: 3
2025-03-28 06:13:15,237 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/editMessageText "HTTP/1.1 200 OK"
2025-03-28 06:13:17,144 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/getUpdates "HTTP/1.1 200 OK"
2025-03-28 06:13:17,296 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/answerCallbackQuery "HTTP/1.1 200 OK"
2025-03-28 06:13:17,297 - __main__ - INFO - کاربر 286420965 دکمه dl_yt_audio_yt_0dbb54 را انتخاب کرد
2025-03-28 06:13:17,297 - __main__ - INFO - شناسه URL استخراج شده: yt_0dbb54
2025-03-28 06:13:17,297 - __main__ - INFO - پردازش درخواست دانلود - نوع: yt, گزینه: audio, شناسه URL: yt_0dbb54
2025-03-28 06:13:17,297 - __main__ - INFO - URL از مخزن پایدار بازیابی شد: yt_0dbb54 -> https://www.youtube.com/shorts...
2025-03-28 06:13:17,453 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/editMessageText "HTTP/1.1 200 OK"
2025-03-28 06:13:17,454 - __main__ - INFO - درخواست دانلود صوتی تشخیص داده شد برای URL: https://www.youtube.com/shorts...
2025-03-28 06:13:17,615 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/editMessageText "HTTP/1.1 200 OK"
2025-03-28 06:13:17,618 - __main__ - INFO - دانلودر یوتیوب راه‌اندازی شد
WARNING: ffmpeg-location /usr/bin/ffmpeg does not exist! Continuing without ffmpeg
ERROR: Postprocessing: ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location
2025-03-28 06:13:24,191 - __main__ - ERROR - خطا در دانلود صوتی یوتیوب: ERROR: Postprocessing: ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location
2025-03-28 06:13:24,214 - __main__ - ERROR - Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3586, in process_info
    replace_info_dict(self.post_process(dl_filename, info_dict, files_to_move))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3770, in post_process
    info = self.run_all_pps('post_process', info, additional_pps=info.get('__postprocessors'))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3752, in run_all_pps
    info = self.run_pp(pp, info)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3730, in run_pp
    files_to_delete, infodict = pp.run(infodict)
                                ^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/postprocessor/common.py", line 23, in run
    ret = func(self, info, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/postprocessor/common.py", line 128, in wrapper
    return func(self, info)
           ^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/postprocessor/ffmpeg.py", line 493, in run
    filecodec = self.get_audio_codec(path)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/postprocessor/ffmpeg.py", line 241, in get_audio_codec
    raise PostProcessingError('ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location')
yt_dlp.utils.PostProcessingError: ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/runner/workspace/telegram_downloader.py", line 2117, in handle_download_option
    await loop.run_in_executor(None, ydl.download, [url])
  File "/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3634, in download
    self.__download_wrapper(self.extract_info)(
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3607, in wrapper
    res = func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 1642, in extract_info
    return self.__extract_info(url, self.get_info_extractor(key), download, extra_info, process)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 1653, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 1809, in __extract_info
    return self.process_ie_result(ie_result, download, extra_info)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 1868, in process_ie_result
    ie_result = self.process_video_result(ie_result, download=download)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3040, in process_video_result
    self.process_info(new_info)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 185, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 3588, in process_info
    self.report_error(f'Postprocessing: {err}')
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 1111, in report_error
    self.trouble(f'{self._format_err("ERROR:", self.Styles.ERROR)} {message}', *args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/yt_dlp/YoutubeDL.py", line 1050, in trouble
    raise DownloadError(message, exc_info)
yt_dlp.utils.DownloadError: ERROR: Postprocessing: ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location

2025-03-28 06:13:24,785 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/editMessageText "HTTP/1.1 200 OK"
2025-03-28 06:13:27,302 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7338644071:AAEex9j0nMualdoywHSGFiBoMAzRpkFypPk/getUpdates "HTTP/1.1 200 OK"
2025-03-28 06:13:37,447 - httpx - INFO - HTTP Request: POST https://api.telegram